<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Pinball</title>

    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script src="components.js"></script>
    
    <style>
        
    </style>
</head>
<body>

<button id="edit-btn" onclick="toggleEditMode()">EDIT (E)</button>

<div id="volume-control">
    <label>VOL</label>
    <input type="range" id="global-volume" min="0" max="100" value="50" oninput="updateVolume(this.value)">
</div>

<button id="reset-btn" onclick="resetBall()">RESET (R)</button>

<div id="lives-container"></div>

<!-- INTRO SCREEN -->
<div id="intro-screen">
    <h1>NEON PINBALL</h1>
    <div class="intro-ball"></div>
    <button id="start-game-btn" onclick="startGame()">START GAME</button>
    <div class="key-hint">Tap / Space to Select</div>
    <div id="level-list-container">
        <!-- data-value ATTRIBUUTTI JOKAISEEN NAPPIIN: -->
        <div class="level-btn active" data-value="level1.js" onclick="chooseLevel(this, 'level1.js')">Planet Sky</div>
        <div class="level-btn" data-value="level2.js" onclick="chooseLevel(this, 'level2.js')">Galaxies</div>
        <div class="level-btn" data-value="level3.js" onclick="chooseLevel(this, 'level3.js')">Synthwave</div>
        <div class="level-btn" data-value="level4.js" onclick="chooseLevel(this, 'level4.js')">Dragon</div>
        <div class="level-btn" data-value="default" onclick="chooseLevel(this, 'default')">Default Table</div>
    </div>
</select>  
</div>

<!-- GAME OVER OVERLAY -->
<div id="game-over-overlay" onclick="goToIntro()">
    <h1>GAME OVER</h1>
    <p>Tap / Space to Main Menu</p>
</div>

<div id="edit-menu">
    <div style="margin-bottom:10px; color:#888; font-size:12px;">TY√ñKALUT</div>
    <button class="tool-btn active" id="btn-move" onclick="selectTool('move')">‚ú¢ SIIRR√Ñ</button>
    <button class="tool-btn danger" id="btn-delete" onclick="selectTool('delete')">üóë POISTA</button>
    <button class="tool-btn" id="btn-camy" onclick="selectTool('camy')">üì∏ CAM-Y</button>
    
    <button class="tool-btn active" id="btn-camera" onclick="toggleCamera()" style="margin-top: 5px;">üì∑ AUTO-CAM: ON</button>
    
    <div style="margin-top:5px; font-size:11px; color:#aaa;" id="selected-info">Ei valintaa</div>
    
    <div class="slider-container" id="rotate-control" style="opacity: 0.5; pointer-events: none;">
        <div class="slider-label"><span>Py√∂ritys (Rotation)</span><span id="rotate-val">0¬∞</span></div>
        <input type="range" id="rotate-slider" min="0" max="360" value="0" oninput="updateRotation(this.value)">
    </div>

    <div class="slider-container" id="size-control" style="opacity: 0.5; pointer-events: none;">
        <div class="slider-label"><span>Koko (Size)</span><span id="size-val">100%</span></div>
        <input type="range" id="size-slider" min="50" max="200" value="100" oninput="updateSize(this.value)">
    </div>

    <div class="prop-row" id="color-control" style="opacity: 0.5; pointer-events: none;">
        <span style="font-size:12px; color:#aaa;">V√§ri (Col)</span>
        <input type="color" id="color-picker" value="#ffffff" oninput="updateColor(this.value)">
    </div>

    <div class="prop-row">
        <span style="font-size:12px; color:#aaa;">Kaari Y (Top)</span>
        <input type="number" id="top-arch-val" value="0" step="10" onchange="createTopArch(this.value)">
    </div>

    <div class="slider-container">
        <div class="slider-label"><span>Ohjainten n√§kyvyys</span><span id="opacity-val">100%</span></div>
        <input type="range" id="opacity-slider" min="0" max="100" value="100" oninput="updateControlsOpacity(this.value)">
    </div>

    <div class="add-row">
        <select id="comp-select">
            <optgroup label="Perus">
                <option value="bumper">Bumper (Pallo)</option>
                <option value="bumper-rect">Bumper (Neli√∂)</option>
                <option value="wall-rect">Sein√§ (Neli√∂)</option>
                <option value="wall-circle">Sein√§ (Pallo)</option>
                <option value="wall-tri">Kolmio (Aita)</option>
            </optgroup>
            <optgroup label="Erikois">
                <option value="rails">Rails (Teleport)</option>
                <option value="slingshot">Boost Slingshot (K√§rki)</option>
                <option value="drop-target">Drop Target</option>
                <option value="wall-long">Pitk√§ Sein√§</option>
                <option value="wall-curve">Kaareva Sein√§</option>
                <option value="led">LED Paneeli</option>
            </optgroup>
            <optgroup label="Uudet">
                <option value="mover">Mover (Liikkuva este)</option>
                <option value="switch-gate">Switch & Gate (Kytkin & Portti)</option>
                <option value="paddle">Paddle (Ohjattava maila)</option>
                <option value="multiball">MultiBall (Bonus)</option>
            </optgroup>
        </select>
        <button class="add-btn" onclick="addComponent()">ADD</button>
    </div>
    
    <div style="margin-top:15px; color:#888; font-size:12px;">TEKSTUURIT</div>
    <div class="io-row">
        <button class="io-btn" onclick="document.getElementById('wall-tex-file').click()">WALL TXTR</button>
        <button class="io-btn io-btn-small" onclick="removeWallTexture()">X</button>
    </div>

    <div class="slider-container">
        <div class="slider-label"><span>Laukaisuvoima</span><span id="power-val">Max</span></div>
        <input type="range" id="power-slider" min="10" max="100" value="100" oninput="updatePower(this.value)">
    </div>

    <div style="margin-top:15px; color:#888; font-size:12px;">TAUSTAKUVA</div>
    <div class="io-row">
        <button class="io-btn" onclick="document.getElementById('bg-file').click()">BG IMG</button>
        <button class="io-btn" id="btn-bgmove" onclick="selectTool('bgmove')">BG MOVE</button>
        <button class="io-btn" onclick="deleteBackground()">BG DEL</button>
    </div>

    <!-- Taustakuvan koon s√§√§t√∂ (Minimi muutettu 1 prosenttiin) -->
    <div class="slider-container">
        <div class="slider-label"><span>Taustakuvan skaalaus</span><span id="bg-size-val">Cover</span></div>
        <input type="range" id="bg-size-slider" min="1" max="300" value="100" oninput="updateBgScale(this.value)">
    </div>

    <!-- Taustakuvan fader -->
    <div class="slider-container">
        <div class="slider-label"><span>Yl√§reunan h√§ivytys</span><span id="fade-val">0%</span></div>
        <input type="range" id="fade-slider" min="0" max="100" value="0" oninput="updateBgFade(this.value)">
    </div>

    <!-- Taustamusiikin valinta (Pudotusvalikko vaihdettu tiedostonappiin) -->
    <div style="margin-top:15px; color:#888; font-size:12px;">TAUSTAMUSIIKKI</div>
    <div class="io-row">
        <button class="io-btn" onclick="document.getElementById('music-file-input').click()">VALITSE MUSIIKKI (MP3)</button>
    </div>
    <div id="music-name-display" style="font-size: 10px; color: #0ff; margin-top: 5px; text-align: center;"></div>

    <div class="io-row">
    <button class="io-btn io-btn-small" style="background:#500; border-color:#f00;" onclick="removeMusic()">POISTA MUSIIKKI</button>
    </div>

    <!-- Piilotettu tiedostosy√∂tt√∂ musiikille -->
    <input type="file" id="music-file-input" style="display: none" accept="audio/*" onchange="handleMusicUpload(this)">

    <!-- Audio-elementti (lis√§√§ bodyyn) -->
    <audio id="bg-audio" loop></audio>

    <div style="margin-top:15px; color:#888; font-size:12px;">TALLENNUS</div>
    <div class="io-row">
        <button class="io-btn" onclick="saveLevel()">SAVE</button>
        <button class="io-btn" onclick="document.getElementById('file-input').click()">LOAD</button>
    </div>
    
    <input type="file" id="bg-file" style="display: none" accept="image/*" onchange="loadBackground(this)">
    <input type="file" id="wall-tex-file" style="display: none" accept="image/*" onchange="loadWallTexture(this)">
    <input type="file" id="file-input" style="display: none" onchange="loadLevel(this)" accept=".js,.json">
</div>

<div id="game-wrapper">
        <!--  H√ÑIVYTYSELEMENTTI -->
        <div id="bg-fade-overlay"></div> 
        <div id="ui-layer"><div id="score">0</div></div>

    <div id="touch-controls">
        <div class="game-btn" id="btn-s" data-key="KeyS">S</div>
        <div class="game-btn" id="btn-j" data-key="KeyJ">J</div>
        <div class="game-btn" id="btn-l" data-key="KeyL">L</div>
    </div>
</div>

    <script src="level1.js" onerror="console.log('Level 1 puuttuu')"></script>
    <script src="level2.js" onerror="console.log('Level 2 puuttuu')"></script>
    <script src="level3.js" onerror="console.log('Level 3 puuttuu')"></script>
    <script src="level4.js" onerror="console.log('Level 4 puuttuu')"></script>
    <script src="main.js"></script>

</body>
</html>
